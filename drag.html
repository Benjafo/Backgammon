<!DOCTYPE html>
<html lang="en">

<head>
    <title>Drag 'n Drop SVG Demo</title>
    <style>
        body {
            padding: 0px;
            margin: 0px;
            font-family: Tahoma, Geneva, Sans-Serif;
        }

        svg {
            display: block;
            margin: 0 auto;
            border: 2px solid #666;
            box-shadow: 5px 5px 10px #aaa;
            border-radius: 5px;
        }

        .htmlBlock {
            position: absolute;
            top: 200px;
            left: 400px;
            width: 200px;
            height: 100px;
            background: #ffc;
            padding: 10px;
        }

        .red {
            fill: red;
            stroke: white;
            stroke-width: 1px;
        }

        .black {
            fill: black;
            stroke: white;
            stroke-width: 1px;
        }

        .cell_white {
            fill: white;
            stroke: red;
            stroke-width: 2px;
        }

        .cell_black {
            fill: black;
            stroke: red;
            stroke-width: 2px;
        }
    </style>
    <script>
        let $ = document.querySelector
        let $$ = document.querySelectorAll

        let player = "Dean",
            moverId,    //keeps track of what I'm dragging
            myX,
            myY;
        const ROWS = 3,
            COLS = 3,
            CELL_SIZE = 90;

        const init = (evt) => {
            drawBoard();

            document.querySelectorAll('svg')[0].addEventListener(`mousemove`, moveChecker);
            document.querySelectorAll('svg')[0].addEventListener(`mouseup`, releaseChecker);
        }

        const drawBoard = () => {
            let board = '',
                x,
                y,
                color,
                cx,
                cy;

            for (let i = 0; i < ROWS; i++) {
                for (let j = 0; j < COLS; j++) {
                    x = CELL_SIZE * i + 550;
                    y = CELL_SIZE * j + 200;
                    color = (i + j) % 2 === 0 ? `white` : `black`;

                    board += `<rect x="${x}" y="${y}" width="${CELL_SIZE}" height="${CELL_SIZE}" 
                        fill="${color}" stroke="red" stroke-width="2" 
                        id="target_${i}${j}" />`;
                }
            }

            // make checkers
            for (let i = 0; i < ROWS; i++) {
                let indent = 0,
                    len = ROWS;

                if (i % 2 != 0) {
                    indent = 50;
                    len = ROWS - 1;
                }

                for (let j = 0; j < len; j++) {
                    cx = (j + 1) * 100 + indent;
                    cy = (i + 1) * 80;
                    board += `<circle class="red" cx=${cx} cy=${cy} 
                        r="25" id="piece_${i}${j}" onmousedown="setMove(this);" />`;
                }
            }

            document.querySelector('#board').innerHTML = board;
        }

        const setMove = (el) => {
            moverId = el.id;

            myX = document.querySelector(`#${moverId}`).getAttribute(`cx`);
            myY = document.querySelector(`#${moverId}`).getAttribute(`cy`);
            console.log(`setMove: ${moverId}  ${myX},${myY}`);
        }

        const moveChecker = (evt) => {
            if (moverId) {
                const moverEl = document.querySelector(`#${moverId}`);

                moverEl.setAttribute(`cx`, evt.offsetX);
                moverEl.setAttribute(`cy`, evt.offsetY);
            }
        }

        const releaseChecker = (evt) => {
            if (moverId) {
                const moverEl = document.querySelector(`#${moverId}`);
            }
        }

    </script>

</head>

<body>
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="900px" height="600px" onload="init( evt );">

        <defs>
            <linearGradient id="0" x1="0" y1="0.5" x2="1" y2="0.5">
                <stop offset="0%" stop-color="#63b3ed" />
                <stop offset="8.71%" stop-color="#5ab9e6" />
                <stop offset="17.43%" stop-color="#58bddf" />
                <stop offset="26.14%" stop-color="#56c1d9" />
                <stop offset="34.86%" stop-color="#55c5d4" />
                <stop offset="43.57%" stop-color="#53c9cf" />
                <stop offset="61%" stop-color="#4fd1c5" />
            </linearGradient>
            <radialGradient id="1" gradientTransform="translate(-0.5 0) scale(2, 2)">
                <stop offset="0%" stop-color="#9f7aea" />
                <stop offset="25%" stop-color="rgba(149, 155, 237, 0.75)" />
                <stop offset="50%" stop-color="rgba(151, 182, 241, 0.5)" />
                <stop offset="100%" stop-color="rgba(190, 227, 248, 0)" />
            </radialGradient>
        </defs>
        <rect fill="url(#0)" height="600px" width="900px" class="background" />
        <rect fill="url(#1)" height="600px" width="900px" class="background" />

        <text x="20px" y="20px" id="whichPlayer">
            You are:
        </text>
        <text x="550px" y="150px" id="output">
            drop coords
        </text>
        <text x="550px" y="190px" id="output2">
            target coords
        </text>

        <g id="board"></g>


    </svg>

    <!-- <div class="htmlBlock">
    html test text...
    <br/>
    <button onclick="this.parentNode.style.display='none'">click to get rid html div</button>
</div> -->

</body>

</html>